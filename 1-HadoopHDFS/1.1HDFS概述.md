Hadoop 分布式文件系统 (HDFS) 是一种基于 Java 的分布式、可伸缩的、便携的系统, 旨在跨越大型商品服务器集群。HDFS 的设计是基于 GFS,谷歌文件系统, 这是在谷歌发表的一篇论文中描述的。与许多其他分布式文件系统一样, HDFS 保存大量数据, 并为通过网络分布的许多客户端提供透明访问。HDFS 擅长于以可靠和可伸缩的方式存储非常大的文件的能力。

HDFS 旨在存储大量信息, 通常是 pb (对于非常大的文件)、gb 和 tb。这是通过使用块结构化文件系统完成的。单个文件被拆分为固定大小的块, 存储在整个群集的计算机上。由几个块组成的文件通常没有存储在单个计算机上的所有块。

HDFS 通过在群集上复制块并分发副本来确保可靠性。默认复制因子为三, 这意味着每个块在群集中存在三次。即使计算机出现故障, 块级复制也可以实现数据可用性.
本章首先介绍了 HDFS 的核心概念, 并解释了如何使用本机内置命令与文件系统进行交互。在几个示例之后, 引入了一个 python 客户端库, 使 HDFS 可以以编程方式从 Python 应用程序中访问。

<h2>HDFS概览</h2>

HDFS 的架构设计由两个过程组成: 一个称为 NameNode 的进程保存文件系统的元数据, 一个或多个 DataNode 进程存储组成文件的块。NameNode 和 DataNode 进程可以在一台计算机上运行, 但 HDFS 群集通常由运行 NameNode 进程的专用服务器和可能运行 DataNode 进程的数以千计的计算机组成。

NameNode 是 HDFS 中最重要的机器。它存储整个文件系统的元数据: 文件名、文件权限和每个数据块的位置。为了允许快速访问此信息, NameNode 将整个元数据结构存储在内存中。NameNode 还跟踪块的复制因子, 确保机器故障不会导致数据丢失。由于 NameNode 是单点故障, 因此可以使用辅助 NameNode 生成主 NameNode 内存结构的快照, 从而减少如果 NameNode 失败时数据丢失的风险。

存储在 HDFS 中的块的机器称为 DataNodes。DataNodes 通常是具有较大存储容量的商品机器。与 NameNode 不同的是, 如果 DataNode 失败, HDFS 将继续正常运行。当 DataNode 失败时, NameNode 将复制丢失的块以确保每个块满足最小复制因子。

图1-1 中的示例演示了将文件映射到 NameNode 中的块, 以及块及其副本在 DataNodes 中的存储。

![](/assets/1-1HDFS.png)
